12px;font-weight:700;display:flex;align-items:center;gap:2px}
        .card-chip.red{color:var(--red-suit)}
        .card-chip .remove{margin-left:4px;opacity:.5;cursor:pointer}
        .cards-empty{color:var(--text-muted);font-size:12px}
        .equity-big{text-align:center;padding:16px;background:linear-gradient(135deg,var(--bg-elevated),var(--bg-card));border-radius:12px;margin-bottom:10px}
        .equity-value{font-size:48px;font-weight:800;background:linear-gradient(135deg,var(--success),#86efac);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .equity-label{font-size:12px;color:var(--text-muted)}
        .equity-gto{font-size:14px;color:var(--warning);margin-top:4px}
        .stepper-row{display:flex;align-items:center;justify-content:space-between;padding:8px 0}
        .stepper-label{font-size:13px;color:var(--text-secondary)}
        .stepper{display:flex;align-items:center;gap:12px}
        .stepper-btn{width:36px;height:36px;border-radius:8px;background:var(--bg-elevated);border:1px solid var(--border);color:var(--text-primary);font-size:20px;cursor:pointer}
        .stepper-btn:active{background:var(--accent)}
        .stepper-value{font-size:20px;font-weight:700;min-width:30px;text-align:center}
        .quick-picker{display:grid;grid-template-columns:repeat(13,1fr);gap:2px}
        .qp-btn{aspect-ratio:.7;border:1px solid var(--border);border-radius:3px;background:var(--bg-elevated);font-size:8px;font-weight:600;cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center}
        .qp-btn:active{transform:scale(.9)}
        .qp-btn.red{color:var(--red-suit)}
        .qp-btn.black{color:var(--black-suit)}
        .qp-btn.selected{background:var(--accent);color:white;border-color:var(--accent)}
        .qp-btn.board-selected{background:var(--success);color:white;border-color:var(--success)}
        .mode-toggle{display:flex;gap:6px;margin-bottom:8px}
        .mode-btn{flex:1;padding:8px;background:var(--bg-elevated);border:1px solid var(--border);border-radius:6px;color:var(--text-secondary);font-size:11px;font-weight:600;cursor:pointer}
        .mode-btn.active{background:var(--accent);border-color:var(--accent);color:white}
        .btn-primary{width:100%;padding:14px;background:linear-gradient(135deg,var(--accent),var(--accent-light));border:none;border-radius:10px;color:white;font-size:15px;font-weight:600;cursor:pointer}
        .btn-primary:active{transform:scale(.98)}
        .model-loading{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--bg-primary);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}
        .model-loading.hidden{display:none}
        .loader{width:50px;height:50px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}
        .loading-text{margin-top:16px;color:var(--text-secondary);font-size:14px}
        .loading-progress{width:200px;height:4px;background:var(--border);border-radius:2px;margin-top:12px;overflow:hidden}
        .loading-bar{height:100%;background:var(--accent);width:0%;transition:width .3s}
        .toast{position:fixed;bottom:calc(60px + var(--safe-bottom));left:50%;transform:translateX(-50%) translateY(60px);background:var(--bg-elevated);border:1px solid var(--border);padding:10px 18px;border-radius:8px;font-size:13px;opacity:0;transition:all .3s;z-index:1000}
        .toast.show{transform:translateX(-50%) translateY(0);opacity:1}
        .toast.error{border-color:var(--danger);color:var(--danger)}
        .toast.success{border-color:var(--success);color:var(--success)}
        .results{background:var(--bg-card);border-radius:12px;padding:14px;border:1px solid var(--border);margin-top:12px}
        .stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:12px 0}
        .stat-box{background:var(--bg-elevated);border-radius:8px;padding:10px;text-align:center}
        .stat-value{font-size:18px;font-weight:700}
        .stat-value.win{color:var(--success)}
        .stat-value.tie{color:var(--warning)}
        .stat-value.lose{color:var(--danger)}
        .stat-label{font-size:10px;color:var(--text-muted)}
    </style>
</head>
<body>
    <div class="model-loading" id="model-loading">
        <div class="loader"></div>
        <div class="loading-text" id="loading-text">Loading AI Model...</div>
        <div class="loading-progress"><div class="loading-bar" id="loading-bar"></div></div>
    </div>
    <div class="app">
        <header class="header">
            <h1>Poker AI</h1>
            <span class="header-badge">ML Recognition</span>
        </header>
        <div class="tab-bar">
            <button class="tab-btn active" data-tab="scan">üì∑ AI Scan</button>
            <button class="tab-btn" data-tab="manual">Manual</button>
            <button class="tab-btn" data-tab="quick">Quick</button>
        </div>
        <main class="content">
            <div id="scan-tab" class="tab-content active">
                <div class="section">
                    <div class="camera-container">
                        <video id="camera-video" autoplay playsinline muted></video>
                        <canvas id="detection-canvas"></canvas>
                        <div class="camera-overlay"><div class="scan-guide"></div></div>
                        <div class="camera-placeholder" id="camera-placeholder">
                            <div class="camera-icon">üì∑</div>
                            <div>Tap to start AI recognition</div>
                        </div>
                        <div class="detection-status" id="detection-status"></div>
                        <div class="live-result" id="live-result">
                            <div class="live-equity" id="live-equity">‚Äî</div>
                            <div class="live-cards" id="live-cards">Detecting cards...</div>
                            <div class="live-gto" id="live-gto"></div>
                        </div>
                    </div>
                    <div class="camera-controls">
                        <button class="btn-cam" id="start-btn"><span class="btn-cam-icon">‚ñ∂Ô∏è</span><span>Start</span></button>
                        <button class="btn-cam" id="detect-btn"><span class="btn-cam-icon">üîç</span><span>Detect</span></button>
                        <button class="btn-cam" id="auto-btn"><span class="btn-cam-icon">üîÑ</span><span>Auto</span></button>
                        <button class="btn-cam" id="flip-btn"><span class="btn-cam-icon">üîÅ</span><span>Flip</span></button>
                    </div>
                    <div class="status-bar">
                        <div class="status-indicator" id="status-indicator"></div>
                        <div class="status-text" id="status-text">Tap Start to begin</div>
                        <div class="status-fps" id="status-fps"></div>
                    </div>
                </div>
                <div class="section">
                    <div class="section-title"><span>Detected Cards</span><button class="btn-cam" style="padding:4px 10px;flex:0" id="clear-detected">Clear</button></div>
                    <div class="cards-row">
                        <div class="cards-group">
                            <div class="cards-label">HAND (first 2)</div>
                            <div class="cards-display hero" id="hero-cards"><span class="cards-empty">Waiting...</span></div>
                        </div>
                        <div class="cards-group">
                            <div class="cards-label">BOARD (next 3-5)</div>
                            <div class="cards-display board" id="board-cards"><span class="cards-empty">Optional</span></div>
                        </div>
                    </div>
                    <div class="stepper-row">
                        <span class="stepper-label">Opponents</span>
                        <div class="stepper">
                            <button class="stepper-btn" id="opp-minus">‚àí</button>
                            <span class="stepper-value" id="opp-value">2</span>
                            <button class="stepper-btn" id="opp-plus">+</button>
                        </div>
                    </div>
                </div>
                <div class="equity-big" id="equity-display" style="display:none">
                    <div class="equity-value" id="equity-value">‚Äî</div>
                    <div class="equity-label">Equity</div>
                    <div class="equity-gto" id="equity-gto"></div>
                </div>
                <div class="section">
                    <div class="section-title">Quick Add (if AI misses)</div>
                    <div class="mode-toggle">
                        <button class="mode-btn active" id="mode-hero">Hand</button>
                        <button class="mode-btn" id="mode-board">Board</button>
                    </div>
                    <div class="quick-picker" id="quick-picker"></div>
                </div>
            </div>
            <div id="manual-tab" class="tab-content">
                <div class="section">
                    <div class="section-title">Select Cards</div>
                    <div class="cards-row">
                        <div class="cards-group">
                            <div class="cards-label">HAND</div>
                            <div class="cards-display hero" id="manual-hero"><span class="cards-empty">Select 2</span></div>
                        </div>
                        <div class="cards-group">
                            <div class="cards-label">BOARD</div>
                            <div class="cards-display board" id="manual-board"><span class="cards-empty">Optional</span></div>
                        </div>
                    </div>
                    <div class="mode-toggle">
                        <button class="mode-btn active" id="manual-mode-hero">Hand (2)</button>
                        <button class="mode-btn" id="manual-mode-board">Board (0-5)</button>
                        <button class="mode-btn" id="manual-clear">Clear</button>
                    </div>
                    <div class="stepper-row">
                        <span class="stepper-label">Opponents</span>
                        <div class="stepper">
                            <button class="stepper-btn" id="manual-opp-minus">‚àí</button>
                            <span class="stepper-value" id="manual-opp-value">2</span>
                            <button class="stepper-btn" id="manual-opp-plus">+</button>
                        </div>
                    </div>
                    <div class="quick-picker" id="manual-picker"></div>
                </div>
                <button class="btn-primary" id="manual-calc">Calculate Equity</button>
                <div id="manual-results"></div>
            </div>
            <div id="quick-tab" class="tab-content">
                <div class="section">
                    <div class="section-title">Text Input</div>
                    <input type="text" id="quick-hero" placeholder="Hand: AsKh" style="width:100%;padding:12px;background:var(--bg-elevated);border:1px solid var(--border);border-radius:8px;color:white;font-size:16px;margin-bottom:10px">
                    <input type="text" id="quick-board" placeholder="Board: TdJdQd (optional)" style="width:100%;padding:12px;background:var(--bg-elevated);border:1px solid var(--border);border-radius:8px;color:white;font-size:16px;margin-bottom:10px">
                    <div class="stepper-row">
                        <span class="stepper-label">Opponents</span>
                        <div class="stepper">
                            <button class="stepper-btn" id="quick-opp-minus">‚àí</button>
                            <span class="stepper-value" id="quick-opp-value">2</span>
                            <button class="stepper-btn" id="quick-opp-plus">+</button>
                        </div>
                    </div>
                </div>
                <button class="btn-primary" id="quick-calc">Calculate</button>
                <button class="btn-primary" id="quick-batch" style="margin-top:8px;background:var(--bg-elevated)">Batch Analysis</button>
                <div id="quick-results"></div>
            </div>
        </main>
    </div>
    <div class="toast" id="toast"></div>
    <!-- ML ‰æùËµñÂ∫ì -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.3"></script>
    <!-- Âç°ÁâáÊ£ÄÊµãËÑöÊú¨ -->
    <script src="card-detector.js"></script>
    <script src="improved-card-detector.js"></script>
    <script src="ml-card-detector.js"></script>
    <script src="app.js"></script>
</body>
</html>
